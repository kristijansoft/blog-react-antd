{"version":3,"sources":["components/PageFooter/index.js"],"names":["index","getRandomArrayElements","arr","count","temp","shuffled","slice","i","length","min","Math","floor","random","check","num","obj","key","indexOf","pathSnippets","this","props","location","pathname","split","filter","dataSource","recommandData","len","TOTAL_DATA","baseHref","substr","push","title","nameMap","setKeyMap","pageArray","chapter","pageNum","Number","currentIndex","prevIndex","nextIndex","prevHref","nextHref","pervNum","nextNum","className","style","isNaN","minHeight","position","type","fontSize","cursor","value","window","href","marginLeft","outline","url","to","map","item","target","rel","color","Component","withRouter"],"mappings":"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","file":"static/js/98.3f4fc046.chunk.js","sourcesContent":["//文档底部footer\r\nimport React, { Component } from 'react';\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport IconFont from \"../IconFont\";\r\nimport { WeiboShareButton } from \"react-share\";\r\nimport QRCode from \"qrcode.react\";\r\nimport setKeyMap from \"../../utils/keymap\";\r\nimport { TOTAL_DATA } from \"../../assets/data\";\r\nimport \"./index.less\";\r\n\r\nclass index extends Component {\r\n    //获取数组中count个随机值\r\n    getRandomArrayElements = (arr, count) => {\r\n        var shuffled = arr.slice(0), i = arr.length, min = i - count, temp, index;\r\n        while (i-- > min) {\r\n            index = Math.floor((i + 1) * Math.random());\r\n            temp = shuffled[index];\r\n            shuffled[index] = shuffled[i];\r\n            shuffled[i] = temp;\r\n        }\r\n        return shuffled.slice(min);\r\n    }\r\n    //查看当前文档在哪个chapter，返回“chapter名”+“——”\r\n    check = (num, obj) => {\r\n        for (let key in obj) {\r\n            if (obj[key].indexOf(num) > -1 && obj[key].length > 1) {\r\n                return key + \"——\"\r\n            }\r\n        }\r\n    }\r\n    render() {\r\n        let path = this.props.location.pathname;\r\n        //将path以\"/\"分割,并保存到数组中\r\n        const pathSnippets = path.split('/').filter(i => i);\r\n        //获取当前文档及推荐文档数据\r\n        let dataSource = [], recommandData = [];\r\n        for (let i = 0, len = TOTAL_DATA.length; i < len; i++) {\r\n            if (pathSnippets[0] === TOTAL_DATA[i].baseHref.substr(1)) {\r\n                dataSource = TOTAL_DATA[i];\r\n            } else {\r\n                recommandData.push({\r\n                    title: TOTAL_DATA[i].title,\r\n                    baseHref: TOTAL_DATA[i].baseHref,\r\n                })\r\n            }\r\n        }\r\n        const nameMap = setKeyMap([dataSource]);\r\n        //pageArray，按chapter顺序返回当前文档所有文章\r\n        let pageArray = [];\r\n        for (let key in dataSource.chapter) {\r\n            pageArray.push(...dataSource.chapter[key]);\r\n        }\r\n        let pageNum = Number(pathSnippets[1]), baseHref = \"/\" + pathSnippets[0] + \"/\";\r\n        let currentIndex = pageArray.indexOf(pageNum), prevIndex = currentIndex - 1, nextIndex = currentIndex + 1;\r\n        //上一页/下一页路由\r\n        let prevHref = baseHref + pageArray[prevIndex], nextHref = baseHref + pageArray[nextIndex], pervNum = pageArray[prevIndex], nextNum = pageArray[nextIndex];\r\n        return (\r\n            <div className=\"page-footer\" style={!isNaN(pageNum) ? { minHeight: \"100vh\" } : {}}>\r\n                <div>\r\n                    <div className=\"share\">\r\n                        <div>\r\n                            <div className=\"wx-icon\" style={{ position: \"relative\" }}>\r\n                                <IconFont type=\"iconweixin1\" title=\"微信\" style={{ fontSize: 32, cursor: \"pointer\" }} />\r\n                                <div className=\"qrcode\" >\r\n                                    <div className=\"arrow\"></div>\r\n                                    <div className=\"inner\">微信扫码阅读文档<QRCode value={window.location.href} /></div>\r\n                                </div>\r\n                            </div>\r\n                            <WeiboShareButton style={{ marginLeft: 24, outline: \"none\" }} url={window.location.href} title={dataSource.title + \"——\" + nameMap[this.props.location.pathname]} ><IconFont type=\"iconweibo1\" title=\"微博\" style={{ fontSize: 32 }} /></WeiboShareButton>\r\n                        </div>\r\n                    如果觉得这篇文章有帮助的话,就分享一下吧,谢谢~\r\n                </div>\r\n                    {!isNaN(pageNum) &&\r\n                        <div className=\"content\">\r\n                            <div className=\"prev\">\r\n                                {nameMap[prevHref] &&\r\n                                    <Link to={prevHref} className=\"pager\">\r\n                                        <div className=\"label\">上一篇</div>\r\n                                        <span className=\"title\">{this.check(pervNum, dataSource.chapter)}{nameMap[prevHref]}</span>\r\n                                    </Link>\r\n                                }\r\n                            </div>\r\n                            <div className=\"next\">\r\n                                {nameMap[nextHref] &&\r\n                                    <Link to={nextHref} className=\"pager\">\r\n                                        <div className=\"label\">下一篇</div>\r\n                                        <span className=\"title\">{this.check(nextNum, dataSource.chapter)}{nameMap[nextHref]}</span>\r\n                                    </Link>\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                    <div className=\"books\">\r\n                        <div className=\"book\">\r\n                            <span className=\"from\">本文来自</span>\r\n                            <div className=\"icon\"><IconFont type=\"iconbook\" style={{ fontSize: 40 }} /></div>\r\n                            <div className=\"name\"><h4><Link to={dataSource.baseHref}>{dataSource.title}</Link></h4></div>\r\n                        </div>\r\n                        {this.getRandomArrayElements(recommandData, 2).map((item, index) =>\r\n                            <div className=\"book\" key={index}>\r\n                                <span className=\"from\">精品推荐</span>\r\n                                <div className=\"icon\"><IconFont type=\"iconbook\" style={{ fontSize: 40 }} /></div>\r\n                                <div className=\"name\"><h4><Link to={item.baseHref}>{item.title}</Link></h4></div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <div className=\"connect\">\r\n                    <div className=\"othersites\">\r\n                        <span>我的站点：</span>\r\n                        <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://music.163.com/#/playlist?id=117824494\" title=\"网易云音乐\"><IconFont type=\"iconwyy\" /></a>\r\n                        <a target=\"_blank\" style={{ fontSize: 34, color: \"#000\" }} rel=\"noopener noreferrer\" href=\"https://github.com/LiuZheAb/\" title=\"Github\"><IconFont type=\"icongithub\" /></a>\r\n                        <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.yuque.com/liuzheab\" title=\"语雀\"><IconFont type=\"iconyuquemianlogo\" /></a>\r\n                    </div>\r\n                    <div className=\"author\">\r\n                        <div className=\"author-content\">\r\n                            <span>&copy; 2020 Deved By <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/LiuZheAb/\" title=\"Github\">LiuZheAb</a> </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(index);"],"sourceRoot":""}